---
layout: post
title: VMware 16安装CentOS 7 配置静态IP
slug: bj36
date: 2020-11-23 11:35
status: publish
author: Xuxx
categories: 
  - 笔记
tags: 
  - Vmware
  - CentOS
excerpt: 笔记
---

## 一.安装VMware 16

[安装VMware 16](https://www.ddosi.com/b397/#VMware16%E5%AF%86%E9%92%A5)

## 二.创建虚拟机

1. 创建新的虚拟机 -> 自定义配置，下一步

   ![](..\static\笔记图片\2020-11-23-VMware 16安装CentOS 7 配置静态IP_01.png)

2. 选择虚拟机硬件兼容性 -> 默认，下一步

3. 安装客户机操作系统 -> 稍后安装操作系统，下一步

   ![](..\static\笔记图片\2020-11-23-VMware 16安装CentOS 7 配置静态IP_02.png)

4. 选择客户机操作系统 -> Linux+CentOS7 64 位，下一步

   ![](..\static\笔记图片\2020-11-23-VMware 16安装CentOS 7 配置静态IP_03.png)

5. 命名虚拟机 -> 按需配置，下一步

6. 处理器、内存配置 -> 按需分配，下一步

   

7. 网络类型 -> 选择NAT类型，下一步

8. 选择I/O控制器类型、选择磁盘类型 -> 默认，下一步

9. 选择磁盘、指定磁盘容量 -> 创建新虚拟磁盘，按需分配磁盘大小，下一步

10. 点击完成

## 三.安装虚拟机操作系统
1. 点击编辑虚拟机设置，选择ISO映像文件
2. 点击开启此虚拟机，进入安装步骤
3. 选择安装语言
4. 点击安装位置，点击选择刚才创建的20g的虚拟硬盘存储，最后点击完成。
5. 点击开始安装，Centos7正在安装中。
6. 设置ROOT账户密码，点击完成（提示：密码简单时需要多点），最后点击完成配置。
7. 重启，由于是安装Minimal版（最小安装），是命令行形式的，不是安装的桌面版的，只能在黑窗口输入命令操作。
8. 输入用户名/密码连接CentOS 7，输入密码不显示，所以要细心输入，以访出错。

四.配置网络

1. 确认虚拟机与主机的连接方式，编辑 -> 虚拟网络编辑器
    虚拟网络编辑器：去除了DHCP的勾选，然后配置子网和子网掩码。因为使用的子网掩码是 255.255.255.0 ，所以子网IP前两位要与本机的IP一致（win查看ip -> ipconfig ）,第三位随意（别和本机一样），第四位无脑填 0 就行。
    NAT设置：网关IP 前三位要和子网IP 一样，第四位随意就行。

2. 配置Centos 7 静态IP 相关配置文件
    配置网卡配置文件：`vi /etc/sysconfig/network-scripts/ifcfg-ens33`
    注意这儿的 IPASSR 不是虚拟网络编辑器的子网 IP！！！（吃过大亏(；´д｀)ゞ....）

  ```shell
  #修改和添加的内容如下：
  ...
  BOOTPROTO="static"
  ...
  ONBOOT="yes"
  #注意这儿的 IP 不是虚拟网络编辑器的子网 IP！！！
  #就是虚拟网络编辑器中的 子网ip网段（前三位）+ 主机号 
  IPADDR="192.168.123.128"
  #子网掩码，也可换成：NETMASK="255.255.255.0"
  PREFIX="24"
  GATEWAY="192.168.123.2"
  IPV6_PRIVACY="no"
  DNS1=8.8.8.8
  DNS2=8.8.4.4
  ```

  配置域名解析配置文件：`vi /etc/resolv.conf`

  ```shell
  #Generated by NetworkManager
  nameserver 8.8.8.8
  nameserver 8.8.4.4
  ```

  然后就可以重启网络了, 命令：`systemctl restart network`
  补充 防火墙命令：

  ```shell
  #关闭防火墙并设置开机不启动
  #查看防火墙状态：
  systemctl status firewalld.service
  #关闭：
  systemctl stop firewalld
  #开启：
  systemctl start firewalld
  #开机自动关闭：
  systemctl disable firewalld
  #开机自动启动：
  systemctl enable firewalld
  ```

  

3. 同步修改主机的网络适配器ip
编辑vmnet8如下：
完整的配置已经结束。下载 ssh 客户端连接就好了。
FinalShell：https://www.hostbuf.com/